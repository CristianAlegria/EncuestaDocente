CREATE TABLE ADMINISTRADOR(
IDADMINISTRADOR int NOT NULL,
NOMBRES char(50) NOT NULL,
APELLIDOS char(30) NOT NULL,
CONTRASENIA varchar(100) NOT NULL,
CONSTRAINT PK_ADMINISTRADOR PRIMARY KEY (IDADMINISTRADOR));

CREATE TABLE ESTUDIANTE(
IDESTUDIANTE int NOT NULL,
NOMBRE char(50) NOT NULL,
CONTRASENIA varchar(100),
CONSTRAINT PK_ESTUDIANTE PRIMARY KEY (IDESTUDIANTE));

CREATE TABLE PLAN(
IDPLAN int NOT NULL,
NOMBRE char(80),
CONSTRAINT PK_PLAN PRIMARY KEY(IDPLAN));



CREATE TABLE ESTUDIANTE_PLAN(
IDESTUDIANTE_PLAN serial NOT NULL,
IDESTUDIANTE int NOT NULL,
IDPLAN int NOT NULL,
CONSTRAINT PK_ESTUDIANTE_PLAN PRIMARY KEY (IDESTUDIANTE_PLAN),

CONSTRAINT FK_ESTUDIANTE_PLAN_ESTUDIANTE FOREIGN KEY(IDESTUDIANTE)
REFERENCES ESTUDIANTE(IDESTUDIANTE),

CONSTRAINT FK_IDESTUDIANTE_PLAN_PLAN FOREIGN KEY(IDPLAN) 
REFERENCES PLAN(IDPLAN));


CREATE TABLE DOCENTE(
IDDOCENTE int NOT NULL,
NOMBRE char(100) NOT NULL,
CONSTRAINT PK_DOCENTE PRIMARY KEY(IDDOCENTE));



CREATE TABLE ASIGNATURA(
IDASIGNATURA char(15) NOT NULL,
NOMBRE char(100) NOT NULL,
CONSTRAINT PK_ASIGNATURA PRIMARY KEY(IDASIGNATURA));


CREATE TABLE GRUPO(
IDGRUPO int NOT NULL,
CONSTRAINT PK_GRUPO PRIMARY KEY(IDGRUPO));


CREATE TABLE ASIGNATURA_GRUPO(
IDASIGNATURA_GRUPO SERIAL NOT NULL,
IDASIGNATURA char(15) NOT NULL,
IDGRUPO int NOT NULL,

CONSTRAINT PK_ASIGNATURA_GRUPO PRIMARY KEY(IDASIGNATURA_GRUPO),
CONSTRAINT FK_ASIGNATURA_GRUPO_GRUPO FOREIGN KEY(IDGRUPO)
REFERENCES GRUPO(IDGRUPO),
CONSTRAINT FK_ASIGNATURA_GRUPO_ASIGNATURA FOREIGN KEY(IDASIGNATURA)
REFERENCES ASIGNATURA(IDASIGNATURA));



CREATE TABLE PLAN_DOCENTE(
IDPLAN_DOCENTE serial NOT NULL,
IDDOCENTE int NOT NULL,
IDPLAN int NOT NULL,
CONSTRAINT PK_PLAN_DOCENTE PRIMARY KEY(IDPLAN_DOCENTE),

CONSTRAINT FK_PLAN_DOCENTE_DOCENTE FOREIGN KEY(IDDOCENTE)
REFERENCES DOCENTE(IDDOCENTE),

CONSTRAINT FK_PLAN_DOCENTE_PLAN FOREIGN KEY(IDPLAN)
REFERENCES PLAN(IDPLAN));







CREATE TABLE ASIGNATURA_GRUPO_PLAN_DOCENTE(
IDASIGNATURA_GRUPO_PLAN_DOCENTE SERIAL NOT NULL,
IDPLAN_DOCENTE int NOT NULL,
IDASIGNATURA_GRUPO int NOT NULL,
SEMESTRE int NOT NULL,
PERIODO VARCHAR(10) NOT NULL,
CONSTRAINT PK_ASIGNATURA_GRUPO_PLAN_DOCENTE PRIMARY KEY(IDASIGNATURA_GRUPO_PLAN_DOCENTE),

CONSTRAINT FK_ASIGNATURA_GRUPO_PLAN_DOCENTE_PLAN_DOCENTE FOREIGN KEY(IDPLAN_DOCENTE)
REFERENCES PLAN_DOCENTE(IDPLAN_DOCENTE),

CONSTRAINT FK_ASIGNATURA_GRUPO_PLAN_DOCENTE_ASIGNATURA_GRUPO FOREIGN KEY(IDASIGNATURA_GRUPO)
REFERENCES ASIGNATURA_GRUPO(IDASIGNATURA_GRUPO));



CREATE TABLE MATRICULA(
IDMATRICULA SERIAL NOT NULL,
IDASIGNATURA_GRUPO_PLAN_DOCENTE int NOT NULL,
IDESTUDIANTE_PLAN int NOT NULL,
CONSTRAINT PK_MATRICULA PRIMARY KEY(IDMATRICULA),

CONSTRAINT FK_MATRICULA_ASIGNATURA_GRUPO_PLAN_DOCENTE FOREIGN KEY(IDASIGNATURA_GRUPO_PLAN_DOCENTE)
REFERENCES ASIGNATURA_GRUPO_PLAN_DOCENTE(IDASIGNATURA_GRUPO_PLAN_DOCENTE),

CONSTRAINT FK_MATRICULA_ESTUDIANTE_PLAN FOREIGN KEY(IDESTUDIANTE_PLAN)
REFERENCES ESTUDIANTE_PLAN(IDESTUDIANTE_PLAN));



-- INSERTAR DATOS DE ADMINISTRADOR--
INSERT INTO ADMINISTRADOR (IDADMINISTRADOR,NOMBRES,APELLIDOS,CONTRASENIA) values
(11143,'ANDREA','MARTINEZ','UNIVALLE');